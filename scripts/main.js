window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,function(){function t(){i=window.innerWidth,n=window.innerHeight,s=document.getElementById("c"),o=s.getContext("2d"),s.width=i,s.height=n,a=new b.App(o),a.start()}function e(){o.fillStyle=h,o.fillRect(0,0,i,n),a.update(),requestAnimationFrame(e)}var i,n,s,o,a,h="#fff",r=navigator.userAgent,l=lux.url.has("debug"),u=lux.url.has("dev"),c=(lux.url.has("skip"),lux.url.has("autoplay")),d=/(localhost|(\d{1,3}\.){3}\d{1,3}|\.(local|dev))$/i.test(location.hostname),S=window!==window.top,p=/ip(hone|od|ad)/i.test(r),E=/(mac os x).*version\/\d(.\d)+ (mobile\/\w{5,} )?safari/i.test(r),w=/(mac os x).*version\/5[.\d]+ (mobile\/\w{5} )?safari/i.test(r),A=/android/i.test(r),T=A&&!/chrome|firefox/i.test(r),f=A&&/chrome/i.test(r),m=T&&/android 2\.\d/i.test(r),_=/KF[A-Z]{2,3}/.test(r),M=/firefox/i.test(r),v=/msie \d/i.test(r),g=navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,H=(!!navigator.msMaxTouchPoints,(lux.url.has("phone")||/mobile/i.test(r)&&!/ipad|tablet/i.test(r))&&!_),L=lux.url.has("tablet")||A&&!H||p&&!H||_,I=lux.url.has("mobile")||H||L,x="webkitAudioContext"in window||"AudioContext"in window,O=!x,y=lux.url.has("simple")||!x&&(H||L),D=lux.url.has("lofi")||H||A||M||w,G=!D,b=window.ma={Flags:{isDebug:l,isDev:u,isAutoPlay:c,isLocal:d,isIFrame:S,isIOS:p,isSafari:E,isSafari5:w,isAndroid:A,isAndroidBrowser:T,isAndroidChrome:f,isAndroid2:m,isKindleFire:_,isFirefox:M,isIE:v,isMSTouch:g,isPhone:H,isTablet:L,isMobile:I,isWebAudio:x,isTagAudio:O,isSimpleAudio:y,isLoFi:D,isHiFi:G},CONSTANTS:{INTERVAL_STEP1:400,STAGE_WIDTH:window.innerWidth,HALF_STAGE_WIDTH:window.innerWidth/2,STAGE_HEIGHT:window.innerHeight,HALF_STAGE_HEIGHT:window.innerHeight/2},components:{Point:null,MuccaBg1:null,step1:{Arrow:null}},helpers:{}};window.onload=function(){t(),e()}}(),function(t){var e=new EventEmitter;_.extend(e,{MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_MOVE:"mousemove",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",SCROLL_UP:"scrollUp",SCROLL_DOWN:"scrollDown",MOUSE_WHEEL:"mousewheel DOMMouseScroll",KEY_DOWN:"keydown"}),t.helpers.events=e}(window.ma),function(t){function e(t){var e,i,n;if(t.preventDefault(),h){if(n=+new Date,s&&(e=n-s,r>e))return;i=t.wheelDelta||-t.detail,o.trigger(0>i?o.SCROLL_DOWN:o.SCROLL_UP),s=n}}function i(t){var e,i,n=t.keyCode;if((n==l.KEY_SPACE||n==l.KEY_RIGHT||n==l.KEY_DOWN||n==l.KEY_LEFT||n==l.KEY_UP)&&h){if(i=+new Date,s&&(e=i-s,r>e))return;o.trigger(n==l.KEY_SPACE||n==l.KEY_RIGHT||n==l.KEY_DOWN?o.SCROLL_DOWN:o.SCROLL_UP),s=i}}function n(){h=!0,document.addEventListener("mousewheel",e,!1),document.addEventListener("DOMMouseScroll",e,!1),document.addEventListener(o.KEY_DOWN,i),a.isMobile}var s,o=t.helpers.events,a=t.Flags,h=!1,r=1e3,l={KEY_SPACE:32,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40};window.addEventListener(o.MOUSE_MOVE,function(t){var e=t.x|t.stageX,i=t.y|t.stageY;o.emit(o.MOUSE_MOVE,{x:e,y:i})}),n()}(window.ma),function(t){var e=t.helpers.events,i=t.CONSTANTS,n=function(t){_.bindAll(this,"onMouseMove","onMouseEnterStep1","onMouseLeaveStep1","delayShowStep1","onScrollUp","onScrollDown"),this.ctx=t,this.count=1,this.currentState="state1",this.bg1=new ma.components.MuccaBg1(t),this.circle=new ma.components.Circle(t,this.bg1),this.step1Arrow=new ma.components.step1.Arrow,this.prevTime=+new Date,this.isMouseEnter=!1,this.$step1=$("#step1"),this.$step1.on(e.MOUSE_ENTER,this.onMouseEnterStep1),this.$step1.on(e.MOUSE_LEAVE,this.onMouseLeaveStep1),e.addListener(e.SCROLL_UP,this.onScrollUp),e.addListener(e.SCROLL_DOWN,this.onScrollDown)};n.prototype={start:function(){this.show[this.currentState].call(this)},update:function(){this.states[this.currentState].call(this)},hide:{state1:function(){e.removeListener(e.MOUSE_MOVE,this.onMouseMove),this.currentMouseState?(this.circle.onMouseEnterStep1(),this.bg1.onMouseEnterStep1(),this.waitStep1=1200):this.waitStep1=0,this.step1Arrow.hide()},state2:function(){}},show:{state1:function(){this.bg1.show(),this.circle.show(),this.step1Arrow.show(),e.addListener(e.MOUSE_MOVE,this.onMouseMove)},state2:function(){console.log(this.waitStep1),0!==this.waitStep1?_.delay(this.delayShowStep1,this.waitStep1):this.delayShowStep1()}},delayShowStep1:function(){console.log("delay"),this.circle.fallDown(),this.bg1.levelUp()},states:{state1:function(){this.bg1.update(),this.circle.update()},state2:function(){this.bg1.update(),this.circle.update()}},mouseMoves:{state1:function(t){if(!this.isMouseEnterStep1){var e=t.x;this.circle.isFall||(e<i.HALF_STAGE_WIDTH?(this.prevMouseState=this.currentMouseState,this.currentMouseState="left"):(this.prevMouseState=this.currentMouseState,this.currentMouseState="right"),this.currentMouseState!==this.prevMouseState&&(this.bg1.onMouseMove(this.currentMouseState),this.circle.onMouseMove(this.currentMouseState,this.bg1)))}}},onMouseMove:function(t){this.mouseMoves[this.currentState].call(this,t)},onMouseEnterStep1:function(){this.prevMouseState=null,this.currentMouseState=null,this.isMouseEnterStep1=!0,this.circle.onMouseEnterStep1(),this.bg1.onMouseEnterStep1()},onMouseLeaveStep1:function(){this.isMouseEnterStep1=!1},onScrollUp:function(){this.count--},onScrollDown:function(){this.count>=2||(this.hide[this.currentState].call(this),this.count++,this.currentState="state"+this.count,this.show[this.currentState].call(this))}},t.App=n}(window.ma),function(t){Point=function(t,e){this.x=t,this.y=e},t.components.Point=Point}(window.ma),function(t){var e=t.CONSTANTS,i=function(t){_.bindAll(this,"addAnimation2","onCompleteAnimation"),this.ctx=t,this.circlePos={x:e.HALF_STAGE_WIDTH,y:null},this.x=0,this.width=window.innerWidth,this.height=0,this.col="#F36D3F",this.rate=0,this.isAnimation1Done=!1};i.prototype={prevMouse:{x:null,y:null},curMouse:{x:null,y:null},rotationBase:{left:-Math.PI/6,right:Math.PI/6},show:function(){this.addAnimation()},addAnimation:function(){var t=parseInt(3*e.STAGE_HEIGHT/5);TweenLite.to(this,.6,{height:t,ease:"Power2.easeInOut",onComplete:this.onCompleteAnimation})},onCompleteAnimation:function(){this.originY=this.y,this.isAnimation1Done=!0},addAnimation2:function(){},init:function(){},levelUp:function(){var t=parseInt(4*e.STAGE_HEIGHT/5);TweenLite.to(this,.6,{height:t,ease:"Power2.easeInOut",onComplete:this.onCompleteAnimation})},update:function(){this.ctx.fillStyle=this.col,this.ctx.beginPath(),this.ctx.moveTo(0,e.STAGE_HEIGHT),this.ctx.lineTo(0,this.leftEdgeY),this.ctx.lineTo(e.STAGE_WIDTH,this.rightEdgeY),this.ctx.lineTo(e.STAGE_WIDTH,e.STAGE_HEIGHT),this.ctx.lineTo(0,e.STAGE_HEIGHT),this.ctx.fill(),this.ctx.closePath()},onMouseMove:function(t){var i,n;n=e.INTERVAL_STEP1/1e3,i=this.rotationBase[t],TweenLite.to(this,n,{rate:i,ease:"Power2.easeInOut"})},onMouseEnterStep1:function(){var t=e.INTERVAL_STEP1/1e3;TweenLite.to(this,t,{rate:0,ease:"Power2.easeInOut"})}},Object.defineProperty(i.prototype,"height",{set:function(t){this.y=window.innerHeight-t,this._height=t,this.leftEdgeY=-e.HALF_STAGE_WIDTH*Math.tan(this.theta)+this.y,this.rightEdgeY=e.HALF_STAGE_WIDTH*Math.tan(this.theta)+this.y},get:function(){return this._height}}),Object.defineProperty(i.prototype,"rate",{set:function(t){this._rate=t,this.theta=Math.PI/10*t,this.leftEdgeY=-e.HALF_STAGE_WIDTH*Math.tan(this.theta)+this.y,this.rightEdgeY=e.HALF_STAGE_WIDTH*Math.tan(this.theta)+this.y},get:function(){return this._rate}}),t.components.MuccaBg1=i}(window.ma),function(t){var e=t.CONSTANTS,i=function(t,i){_.bindAll(this,"addAnimation","onCompleteAnimation","swipeBackground"),this.ctx=t,this.isActive=!1,this.isFall=!0,this.bg=i,this.duration=parseInt(2*e.STAGE_WIDTH/3/800*10)/10};i.prototype={rad:4,MIN_RAD:4,MAX_RAD:12,col:"rgb(165, 165, 165)",_colNumber:165,show:function(){_.delay(this.addAnimation,600)},moveBase:{left:1*e.STAGE_WIDTH/6,right:5*e.STAGE_WIDTH/6},addAnimation:function(){console.log("addAnimation");var e=parseInt(2*t.CONSTANTS.STAGE_HEIGHT/5);this.x=t.CONSTANTS.HALF_STAGE_WIDTH,this.y=-this.rad,this.isActive=!0,TweenLite.to(this,.4,{y:e,ease:"Bounce.easeOut",onComplete:this.onCompleteAnimation})},onCompleteAnimation:function(){this.isFall=!1},fallDown:function(){var e=parseInt(.5*t.CONSTANTS.STAGE_HEIGHT)+this.rad+1;this.isFall=!0,TweenLite.to(this,.4,{y:e,colNumber:255,onComplete:this.swipeBackground})},swipeBackground:function(){var t=Math.sqrt(e.HALF_STAGE_WIDTH*e.HALF_STAGE_WIDTH+e.HALF_STAGE_HEIGHT*e.HALF_STAGE_HEIGHT),i=this.y+t;TweenLite.to(this,.6,{rad:t,y:i})},update:function(){var t;this.isActive&&(this.ctx.beginPath(),this.ctx.fillStyle=this.col,t=this.isFall?this.y:Math.tan(this.bg.theta)*(this.x-e.HALF_STAGE_WIDTH)+this.bg.y,this.ctx.arc(this.x,t-this.rad+1,this.rad,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.closePath())},update2:function(){this.ctx.beginPath(),this.ctx.fillStyle=this.col,this.ctx.arc(this.x,this.y,this.rad,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.closePath()},onMouseMove:function(t){var i;i=e.INTERVAL_STEP1/2e3,this.rad==this.MAX_RAD?TweenLite.to(this,this.duration,{x:this.moveBase[t],ease:"Linear",delay:i}):TweenLite.to(this,this.duration,{x:this.moveBase[t],rad:this.MAX_RAD,ease:"Linear",delay:i})},onMouseEnterStep1:function(){if(this.isActive&&!this.isFall){var t;t=e.INTERVAL_STEP1/2e3,TweenLite.to(this,this.duration,{x:e.HALF_STAGE_WIDTH,rad:this.MIN_RAD,ease:"Linear",delay:t})}}},Object.defineProperty(i.prototype,"colNumber",{set:function(t){this._colNumber=t;var e=parseInt(this._colNumber);this.col="rgb("+e+", "+e+", "+e+")"},get:function(){return this._colNumber}}),t.components.Circle=i}(window.ma),function(t){var e=t.CONSTANTS,i="#fff",n=function(){_.bindAll(this,"fallDown"),this.$container=$("#step1");var t=parseInt(2*e.STAGE_HEIGHT/5)+"px";this.$container.css({top:t}),this.id="#arrow-svg",this.$id=$(this.id),this.svg=new Snap(this.id),window.svg=this.svg,this.line=this.svg.polyline([0,0,30,0,60,0]),this.svg.attr({fill:null,stroke:i,strokeWidth:1})};n.prototype={show:function(){_.delay(this.fallDown,700)},hide:function(){this.line.animate({points:[30,20,30,20,30,20]},400,mina.easeinout);var t=this;_.delay(function(){t.$container.css({display:"none"})},400)},fallDown:function(){var t=parseInt(e.STAGE_HEIGHT-50);this.$container.velocity({top:t},600,"easeInOutCubic");var i=this;_.delay(function(){i.line.animate({points:[0,0,30,20,60,0]},400,mina.easeinout)},500)},update:function(){}},t.components.step1.Arrow=n}(window.ma);